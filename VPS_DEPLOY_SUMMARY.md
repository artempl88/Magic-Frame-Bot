# ü™Ñ Magic Frame Bot - VPS –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞!

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ VPS —Å webhook: **https://bot.magicframebot.com/kwork**

## ‚úÖ –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

### üåê **Webhook –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- **–û—Å–Ω–æ–≤–Ω–æ–π webhook:** `https://bot.magicframebot.com/kwork`
- **–Æ–ö–∞—Å—Å–∞ webhook:** `https://bot.magicframebot.com/yookassa/webhook`
- **Health check:** `https://bot.magicframebot.com/kwork/health`
- **–ü–æ—Ä—Ç:** `8081` (–æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞)

### üìÑ **–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- ‚úÖ `.env.client` - VPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å webhook URL
- ‚úÖ `docker-compose.yml` - –æ—Å–Ω–æ–≤–Ω–æ–π compose —Ñ–∞–π–ª  
- ‚úÖ `Makefile` - —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è VPS
- ‚úÖ `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è VPS

### üóëÔ∏è **–£–¥–∞–ª–µ–Ω–æ –ª–∏—à–Ω–µ–µ:**
- ‚ùå `docker-compose.simple.yml` (–ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- ‚ùå –í—Å–µ nginx/grafana –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ùå –î—É–±–ª–∏—Ä—É—é—â–∏–µ Makefile —Ñ–∞–π–ª—ã

## üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS
make up         # –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
make up-backup  # –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –±—ç–∫–∞–ø–∞–º–∏
make up-full    # –° Celery Worker

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
make logs       # –õ–æ–≥–∏
make ps         # –°—Ç–∞—Ç—É—Å
make health     # –ü—Ä–æ–≤–µ—Ä–∫–∞ (–≤–∫–ª—é—á–∞—è webhook)

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
make down       # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make restart    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```

## üí≥ **–ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**

### **Telegram Stars (–≥–æ—Ç–æ–≤–æ):**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–µ–Ω–∞–º–∏

### **–Æ–ö–∞—Å—Å–∞ (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):**
- üìù –î–æ–±–∞–≤–∏—Ç—å –≤ `.env.client`:
  ```bash
  YOOKASSA_SHOP_ID=–≤–∞—à_shop_id
  YOOKASSA_SECRET_KEY=–≤–∞—à_secret_key
  ENABLE_YOOKASSA=true
  ```
- üìù –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ –Æ–ö–∞—Å—Å–µ: `https://bot.magicframebot.com/yookassa/webhook`

## üéõÔ∏è **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**

- **–í—Ö–æ–¥:** `/admin` –≤ –±–æ—Ç–µ
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏:** Stars –∏ —Ä—É–±–ª–∏
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Æ–ö–∞—Å—Å—ã:** –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- **–ë—ç–∫–∞–ø—ã:** —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –¥–æ—Ö–æ–¥—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

## üîß **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS:**

### **1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∏ Docker Compose
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π  
git clone <repo-url>
cd MagicFrameBot
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
# –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –Æ–ö–∞—Å—Å—É –≤ .env.client

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
pip install yookassa==3.0.0
```

### **3. –ó–∞–ø—É—Å–∫:**
```bash
# –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–±—ç–∫–∞–ø–∞–º–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
make up-backup

# –ü—Ä–æ–≤–µ—Ä–∫–∞
make health
make logs
```

## üåê **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (nginx):**

### **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å reverse proxy:**
```nginx
server {
    listen 80;
    server_name bot.magicframebot.com;
    
    location /kwork {
        proxy_pass http://127.0.0.1:8081;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /yookassa/webhook {
        proxy_pass http://127.0.0.1:8081;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Certbot
certbot --nginx -d bot.magicframebot.com
```

## üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- üåê **Webhook:** https://bot.magicframebot.com/kwork/health
- üí≥ **–Æ–ö–∞—Å—Å–∞:** https://bot.magicframebot.com/yookassa/webhook
- ü§ñ **Telegram:** –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `/start` –±–æ—Ç—É

### **–õ–æ–≥–∏ –∏ —Å—Ç–∞—Ç—É—Å:**
```bash
# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
make logs

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
make stats
```

## üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- ‚úÖ Webhook –Ω–∞ HTTPS
- ‚úÖ –ó–∞–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã –ë–î –∏ Redis
- ‚úÖ –°–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ .env.client
- ‚úÖ Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

## üéâ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!**

**–í–∞—à Magic Frame Bot –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è VPS:**

- üöÄ **–ì–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é** –Ω–∞ https://bot.magicframebot.com/kwork
- üí≥ **–î–≤–æ–π–Ω–∞—è –ø–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (Stars + –Æ–ö–∞—Å—Å–∞)
- üéõÔ∏è **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- üíæ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã** –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- üìä **–ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ VPS
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å nginx reverse proxy
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Æ–ö–∞—Å—Å—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. –ù–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å! üí∞ 